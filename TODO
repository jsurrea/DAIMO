# Upload a new data file
# Also update puentes_criticos according to this new dataset

# Revisar problema de que grafo se desconecta si quito muchos puentes

##### añadir funcionalidad intervencion simultanea

    @app.callback(
        [
            Output("cost-modal", "is_open"),
            Output("modal-body", "children"),
        ],
        [
            Input("btn_calcular", "n_clicks"),
            Input("close-modal", "n_clicks"),
        ],
        [
            State("checklist", "value"),
        ],
    )
    def toggle_modal(btn_calcular, close_modal, selected_puentes):

        ctx = dash.callback_context

        if not ctx.triggered_id:
            raise PreventUpdate

        if "btn_calcular" in ctx.triggered_id:
            costo_alternativa, delta_costo = model.calculate_cost(selected_puentes)
            costo_alternativa = locale.currency(costo_alternativa, grouping=True)
            costo_original = model.get_base_costs()["TOTAL"][0]
            result_list = [
                html.P(f"El costo total de la intervención es: {costo_alternativa}"),
                html.P(f"La diferencia respecto al costo original es: {delta_costo/costo_original*100:.5f}%"),
                html.Hr(),
                html.P(f"Los puentes seleccionados fueron:"),
                html.Ul([html.Li(p) for p in selected_puentes]),
            ]
            return True, result_list

        return False, no_update

    return modal